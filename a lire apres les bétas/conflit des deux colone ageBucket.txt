Voici un README court, clair et professionnel, Ã  mettre dans ton dossier routes/account/ ou Ã  la racine du mini-back pour documenter proprement la situation.
Il explique pourquoi deux colonnes existent, comment le backend gÃ¨re la transition, et comment faire le mÃ©nage plus tard.

ğŸ“„ README â€” Gestion des colonnes age_bucket et ageBucket
ğŸ¯ Contexte

Dans la table users, deux colonnes historisent la mÃªme information :

age_bucket â†’ colonne officielle (convention snake_case)

ageBucket â†’ colonne hÃ©ritÃ©e, crÃ©Ã©e accidentellement lors dâ€™une ancienne version du flux dâ€™inscription.

Pour Ã©viter toute rÃ©gression dans lâ€™application, les deux colonnes sont encore prÃ©sentes dans la base.

âœ”ï¸ Comportement actuel du backend (sÃ©curisÃ© et cohÃ©rent)
Lecture

Le backend lit la valeur via :

COALESCE(age_bucket, ageBucket) AS ageBucket


â†’ Cela garantit que lâ€™API renvoie toujours une valeur cohÃ©rente, mÃªme si certains comptes anciens nâ€™ont pas encore la colonne normalisÃ©e.

Ã‰criture

La mise Ã  jour dâ€™un profil modifie uniquement :

age_bucket


La colonne camelCase ageBucket nâ€™est plus jamais modifiÃ©e.
Elle continue simplement Ã  exister pour compatibilitÃ© et pour Ã©viter de casser dâ€™anciens comptes.

ğŸ”„ Situation actuelle : stable pour la production

Aucun bug.

Aucune ambiguÃ¯tÃ© cÃ´tÃ© front.

Aucun impact sur la connexion, le compte utilisateur ou les journaux.

Pas de migration urgente nÃ©cessaire.

Câ€™est la solution la plus sÃ»re pendant la phase bÃªta.

ğŸ§¹ Nettoyage possible (optionnel)

Quand le projet sera stabilisÃ©, il sera possible de :

Copier les valeurs rÃ©siduelles depuis ageBucket vers age_bucket (au cas oÃ¹).

Supprimer dÃ©finitivement la colonne ageBucket.

Cela nÃ©cessite une petite migration SQLite :

UPDATE users
SET age_bucket = COALESCE(age_bucket, ageBucket);

ALTER TABLE users DROP COLUMN ageBucket;


âš ï¸ DROP COLUMN nâ€™existe pas nativement dans SQLite.
Il faudra passer par une migration standard (recreate table).
Une version prÃªte Ã  l'emploi sera fournie si nÃ©cessaire.

ğŸ“ Conclusion

Le backend fonctionne parfaitement avec les deux colonnes.

Aucune urgence Ã  migrer.

Une suppression future de ageBucket est recommandÃ©e mais non obligatoire.

La logique actuelle est propre, cohÃ©rente et sÃ»re pour la production.